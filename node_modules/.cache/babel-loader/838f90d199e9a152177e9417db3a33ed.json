{"ast":null,"code":"import\"antd/es/modal/style\";import _Modal from\"antd/es/modal\";import\"antd/es/card/style\";import _Card from\"antd/es/card\";import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/notification/style\";import _notification from\"antd/es/notification\";import _slicedToArray from\"F:\\\\Project\\\\walkspanDeploy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import\"antd/es/input/style\";import _Input from\"antd/es/input\";import React,{useEffect,useState}from\"react\";import IndividualScore from\"./IndividualScore/IndividualScore\";import ComparisonScore from\"./ComparisonScore/ComparisonScore\";import Map from\"./Map/Map\";import NoResult from\"./noResult\";//import styles from \"./widgetBox.module.less\";\nimport{useDispatch,useMappedState}from\"redux-react-hook\";import{addUserWidget}from\"../../../actions/widget\";var TextArea=_Input.TextArea;var mapStateWidget=function mapStateWidget(state){return state.widget;};var operationTabList=[{key:\"individual_scores\",tab:/*#__PURE__*/React.createElement(\"span\",null,\"Individual Scores\")},{key:\"comparison_scores\",tab:/*#__PURE__*/React.createElement(\"span\",null,\"Comparison Scores\")},{key:\"map\",tab:/*#__PURE__*/React.createElement(\"span\",null,\"Map\")}];var WidgetBox=function WidgetBox(props){var dispatch=useDispatch();var features=props.features,featureScore=props.featureScore,checkedView=props.checkedView,scope=props.scope,addressInput=props.addressInput,_props$isMyWidget=props.isMyWidget,isMyWidget=_props$isMyWidget===void 0?false:_props$isMyWidget;var _useMappedState=useMappedState(mapStateWidget),_useMappedState$widge=_useMappedState.widgetResult,widgetResult=_useMappedState$widge===void 0?{address:\"574 Hudson St, New York, NY 10014, USA\"}:_useMappedState$widge,addUserWidgetResult=_useMappedState.addUserWidgetResult;var address=widgetResult.address;var _useState=useState(\"individual_scores\"),_useState2=_slicedToArray(_useState,2),tabKey=_useState2[0],setTabKey=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modal_visible=_useState4[0],setModalVisible=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),name_modal_visible=_useState6[0],setName_modal_visible=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),widgetName=_useState8[0],setWidgetName=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),description_text=_useState10[0],setDescriptionText=_useState10[1];var onTabChange=function onTabChange(key){setTabKey(key);};useEffect(function(){if(isMyWidget===true){return;}if(addUserWidgetResult===undefined)return;if(addUserWidgetResult.status===\"Successfully\"){_notification[\"success\"]({message:\"Add to myWidget Successfully\",description:\"Add to myWidget Successfully! Please check out in user module.\"});return;}else{_notification[\"error\"]({message:\"Failed\",description:\"Something went wrong, please try again latter.\"});return;}},[addUserWidgetResult]);var renderChildrenByTabKey=function renderChildrenByTabKey(tabKey){switch(tabKey){case\"map\":return/*#__PURE__*/React.createElement(\"div\",null,JSON.stringify(featureScore)===\"{}\"?/*#__PURE__*/React.createElement(NoResult,null):/*#__PURE__*/React.createElement(Map,{featuresStatus:features,scope:scope,addressInput:addressInput}));case\"comparison_scores\":return/*#__PURE__*/React.createElement(\"div\",null,JSON.stringify(featureScore)===\"{}\"?/*#__PURE__*/React.createElement(NoResult,null):/*#__PURE__*/React.createElement(ComparisonScore,{featuresStatus:features,featureScore:featureScore}));case\"individual_scores\":default:return/*#__PURE__*/React.createElement(\"div\",null,JSON.stringify(featureScore)===\"{}\"?/*#__PURE__*/React.createElement(NoResult,null):/*#__PURE__*/React.createElement(IndividualScore,{featuresStatus:features,featureScore:featureScore,checkedView:checkedView}));}};var getFeatureList=function getFeatureList(featureList){if(featureList===[]){return featureList;}featureList.map(function(item){delete item.img_faded;delete item.img_new;});return featureList;};var handleAddWidget=function handleAddWidget(){if(localStorage.getItem(\"isLogin\")===JSON.stringify(false)||localStorage.getItem(\"isLogin\")===null){setModalVisible(true);return;}var featureStatus=getFeatureList(JSON.parse(JSON.stringify(features)).filter(function(e){return e.isChecked;}));if(featureStatus.length===0){_notification[\"info\"]({message:\"Please Select features\",description:\"Please select at lease one feature as your customized widget.\"});return;}setName_modal_visible(true);};var handleOk=function handleOk(e){window.location.href=\"/login\";setModalVisible(false);};var handleCancel=function handleCancel(e){setModalVisible(false);};var handle_name_Ok=function handle_name_Ok(e){var params=new URLSearchParams();var featureStatus=getFeatureList(JSON.parse(JSON.stringify(features)).filter(function(e){return e.isChecked;}));var user_id=JSON.parse(localStorage.getItem(\"user_info\")).user_id;params.append(\"selected_features\",\"\"+JSON.stringify(featureStatus));params.append(\"features_score\",\"\"+JSON.stringify(featureScore));params.append(\"checked_view\",\"\"+JSON.stringify(checkedView));params.append(\"scope\",scope);params.append(\"address\",address);params.append(\"user_id\",user_id);params.append(\"widget_name\",widgetName);params.append(\"widget_description\",description_text);dispatch(addUserWidget(params));setName_modal_visible(false);};var handle_name_Cancel=function handle_name_Cancel(e){setName_modal_visible(false);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(_Card,{title:!isMyWidget&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",null,\"Customized Widget for\",\" \",/*#__PURE__*/React.createElement(\"span\",{style:{fontWeight:\"bold\"}},address)),/*#__PURE__*/React.createElement(_Button,{style:{float:\"right\",borderRadius:\"10px\"},onClick:handleAddWidget},\"Add to my Widget\")),bordered:true,tabList:operationTabList,activeTabKey:tabKey,onTabChange:onTabChange,style:{minHeight:\"700px\"}},renderChildrenByTabKey(tabKey))),/*#__PURE__*/React.createElement(_Modal,{title:\"Login to access the widget\",visible:modal_visible,onOk:handleOk,onCancel:handleCancel},/*#__PURE__*/React.createElement(\"p\",null,\"Sorry, you need to login to add customized widget!\"),/*#__PURE__*/React.createElement(\"p\",null),/*#__PURE__*/React.createElement(\"p\",null)),/*#__PURE__*/React.createElement(_Modal,{title:\"Add to myWidget\",visible:name_modal_visible,onOk:handle_name_Ok,onCancel:handle_name_Cancel},/*#__PURE__*/React.createElement(\"div\",null,\"Please input a name for the widget:\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(_Input,{size:\"large\",value:widgetName,onChange:function onChange(e){return setWidgetName(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",null,\"Widget Description:\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TextArea,{rows:4,value:description_text,onChange:function onChange(e){return setDescriptionText(e.target.value);}}))));};export default WidgetBox;","map":{"version":3,"sources":["F:/Project/walkspanDeploy/src/pages/widgets/WidgetBox/widgetBox.js"],"names":["React","useEffect","useState","IndividualScore","ComparisonScore","Map","NoResult","useDispatch","useMappedState","addUserWidget","TextArea","mapStateWidget","state","widget","operationTabList","key","tab","WidgetBox","props","dispatch","features","featureScore","checkedView","scope","addressInput","isMyWidget","widgetResult","address","addUserWidgetResult","tabKey","setTabKey","modal_visible","setModalVisible","name_modal_visible","setName_modal_visible","widgetName","setWidgetName","description_text","setDescriptionText","onTabChange","undefined","status","message","description","renderChildrenByTabKey","JSON","stringify","getFeatureList","featureList","map","item","img_faded","img_new","handleAddWidget","localStorage","getItem","featureStatus","parse","filter","e","isChecked","length","handleOk","window","location","href","handleCancel","handle_name_Ok","params","URLSearchParams","user_id","append","handle_name_Cancel","fontWeight","float","borderRadius","minHeight","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport IndividualScore from \"./IndividualScore/IndividualScore\";\r\nimport ComparisonScore from \"./ComparisonScore/ComparisonScore\";\r\nimport Map from \"./Map/Map\";\r\nimport NoResult from \"./noResult\";\r\n//import styles from \"./widgetBox.module.less\";\r\nimport { Card, Button, Modal, notification, Input } from \"antd\";\r\nimport { useDispatch, useMappedState } from \"redux-react-hook\";\r\nimport { addUserWidget } from \"../../../actions/widget\";\r\nconst { TextArea } = Input;\r\nconst mapStateWidget = (state) => state.widget;\r\n\r\nconst operationTabList = [\r\n  {\r\n    key: \"individual_scores\",\r\n    tab: <span>Individual Scores</span>,\r\n  },\r\n  {\r\n    key: \"comparison_scores\",\r\n    tab: <span>Comparison Scores</span>,\r\n  },\r\n  {\r\n    key: \"map\",\r\n    tab: <span>Map</span>,\r\n  },\r\n];\r\n\r\nconst WidgetBox = (props) => {\r\n  const dispatch = useDispatch();\r\n  const {\r\n    features,\r\n    featureScore,\r\n    checkedView,\r\n    scope,\r\n    addressInput,\r\n    isMyWidget = false,\r\n  } = props;\r\n  const {\r\n    widgetResult = { address: \"574 Hudson St, New York, NY 10014, USA\" },\r\n    addUserWidgetResult,\r\n  } = useMappedState(mapStateWidget);\r\n  const { address } = widgetResult;\r\n  const [tabKey, setTabKey] = useState(\"individual_scores\");\r\n  const [modal_visible, setModalVisible] = useState(false);\r\n  const [name_modal_visible, setName_modal_visible] = useState(false);\r\n  const [widgetName, setWidgetName] = useState();\r\n  const [description_text, setDescriptionText] = useState();\r\n\r\n  const onTabChange = (key) => {\r\n    setTabKey(key);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isMyWidget === true) {\r\n      return;\r\n    }\r\n\r\n    if (addUserWidgetResult === undefined) return;\r\n\r\n    if (addUserWidgetResult.status === \"Successfully\") {\r\n      notification[\"success\"]({\r\n        message: \"Add to myWidget Successfully\",\r\n        description:\r\n          \"Add to myWidget Successfully! Please check out in user module.\",\r\n      });\r\n      return;\r\n    } else {\r\n      notification[\"error\"]({\r\n        message: \"Failed\",\r\n        description: \"Something went wrong, please try again latter.\",\r\n      });\r\n      return;\r\n    }\r\n  }, [addUserWidgetResult]);\r\n\r\n  const renderChildrenByTabKey = (tabKey) => {\r\n    switch (tabKey) {\r\n      case \"map\":\r\n        return (\r\n          <div>\r\n            {JSON.stringify(featureScore) === \"{}\" ? (\r\n              <NoResult />\r\n            ) : (\r\n              <Map\r\n                featuresStatus={features}\r\n                scope={scope}\r\n                addressInput={addressInput}\r\n              />\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case \"comparison_scores\":\r\n        return (\r\n          <div>\r\n            {JSON.stringify(featureScore) === \"{}\" ? (\r\n              <NoResult />\r\n            ) : (\r\n              <ComparisonScore\r\n                featuresStatus={features}\r\n                featureScore={featureScore}\r\n              />\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case \"individual_scores\":\r\n      default:\r\n        return (\r\n          <div>\r\n            {JSON.stringify(featureScore) === \"{}\" ? (\r\n              <NoResult />\r\n            ) : (\r\n              <IndividualScore\r\n                featuresStatus={features}\r\n                featureScore={featureScore}\r\n                checkedView={checkedView}\r\n              />\r\n            )}\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  const getFeatureList = (featureList) => {\r\n    if (featureList === []) {\r\n      return featureList;\r\n    }\r\n\r\n    featureList.map((item) => {\r\n      delete item.img_faded;\r\n      delete item.img_new;\r\n    });\r\n    return featureList;\r\n  };\r\n\r\n  const handleAddWidget = () => {\r\n    if (localStorage.getItem(\"isLogin\") === JSON.stringify(false) ||\r\n    localStorage.getItem(\"isLogin\") === null ) {\r\n      setModalVisible(true);\r\n      return;\r\n    }\r\n\r\n    let featureStatus = getFeatureList(\r\n      JSON.parse(JSON.stringify(features)).filter((e) => e.isChecked)\r\n    );\r\n\r\n    if (featureStatus.length === 0) {\r\n      notification[\"info\"]({\r\n        message: \"Please Select features\",\r\n        description:\r\n          \"Please select at lease one feature as your customized widget.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    setName_modal_visible(true);\r\n  };\r\n\r\n  const handleOk = (e) => {\r\n    window.location.href = \"/login\";\r\n    setModalVisible(false);\r\n  };\r\n\r\n  const handleCancel = (e) => {\r\n    setModalVisible(false);\r\n  };\r\n\r\n  const handle_name_Ok = (e) => {\r\n    let params = new URLSearchParams();\r\n    let featureStatus = getFeatureList(\r\n      JSON.parse(JSON.stringify(features)).filter((e) => e.isChecked)\r\n    );\r\n    let user_id = JSON.parse(localStorage.getItem(\"user_info\")).user_id;\r\n    params.append(\"selected_features\", \"\" + JSON.stringify(featureStatus));\r\n    params.append(\"features_score\", \"\" + JSON.stringify(featureScore));\r\n    params.append(\"checked_view\", \"\" + JSON.stringify(checkedView));\r\n    params.append(\"scope\", scope);\r\n    params.append(\"address\", address);\r\n    params.append(\"user_id\", user_id);\r\n    params.append(\"widget_name\", widgetName);\r\n    params.append(\"widget_description\", description_text);\r\n    dispatch(addUserWidget(params));\r\n    setName_modal_visible(false);\r\n  };\r\n\r\n  const handle_name_Cancel = (e) => {\r\n    setName_modal_visible(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <Card\r\n          title={\r\n            !isMyWidget && (\r\n              <div>\r\n                <span>\r\n                  Customized Widget for{\" \"}\r\n                  <span style={{ fontWeight: \"bold\" }}>{address}</span>\r\n                </span>\r\n                <Button\r\n                  style={{ float: \"right\", borderRadius: \"10px\" }}\r\n                  onClick={handleAddWidget}\r\n                >\r\n                  Add to my Widget\r\n                </Button>\r\n              </div>\r\n            )\r\n          }\r\n          bordered={true}\r\n          tabList={operationTabList}\r\n          activeTabKey={tabKey}\r\n          onTabChange={onTabChange}\r\n          style={{ minHeight: \"700px\" }}\r\n        >\r\n          {renderChildrenByTabKey(tabKey)}\r\n        </Card>\r\n      </div>\r\n\r\n      <Modal\r\n        title=\"Login to access the widget\"\r\n        visible={modal_visible}\r\n        onOk={handleOk}\r\n        onCancel={handleCancel}\r\n      >\r\n        <p>Sorry, you need to login to add customized widget!</p>\r\n        <p></p>\r\n        <p></p>\r\n      </Modal>\r\n\r\n      <Modal\r\n        title=\"Add to myWidget\"\r\n        visible={name_modal_visible}\r\n        onOk={handle_name_Ok}\r\n        onCancel={handle_name_Cancel}\r\n      >\r\n        <div>Please input a name for the widget:</div>\r\n        <div>\r\n          <Input\r\n            size=\"large\"\r\n            value={widgetName}\r\n            onChange={(e) => setWidgetName(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        <div>Widget Description:</div>\r\n        <div>\r\n          <TextArea\r\n            rows={4}\r\n            value={description_text}\r\n            onChange={(e) => setDescriptionText(e.target.value)}\r\n          />\r\n        </div>\r\n      </Modal>\r\n      \r\n    </>\r\n  );\r\n};\r\n\r\nexport default WidgetBox;\r\n"]},"metadata":{},"sourceType":"module"}