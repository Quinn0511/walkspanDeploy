{"ast":null,"code":"import \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/list/style\";\nimport _List from \"antd/es/list\";\nvar _jsxFileName = \"F:\\\\Project\\\\walkspanDeploy\\\\src\\\\pages\\\\admin\\\\component_of_control_panel\\\\WidgetContent.js\";\nimport React, { useEffect, useState } from \"react\";\nimport styles from \"./WidgetContent.module.less\";\nimport { useDispatch, useMappedState } from \"redux-react-hook\";\nimport { getUserWidgetByUserID } from \"../../../actions/widget\";\nimport WidgetBox from \"../../widgets/WidgetBox/widgetBox\";\nimport WidgetBoxForUser from \"./WidgetBoxForUser\";\nimport moment from \"moment\";\nimport WidgetDescription from \"./WidgetDescription\";\n\nconst mapStateWidget = state => state.widget;\n\nconst WidgetContent = () => {\n  const dispatch = useDispatch();\n  const [user_id, setUserId] = useState();\n  const {\n    userWidgetResult = {\n      userWidget: []\n    }\n  } = useMappedState(mapStateWidget);\n  const [widget_modal_visible, setWidget_modal_visible] = useState(false);\n  const [widget_ii_modal_visible, setWidget_ii_modal_visible] = useState(false);\n  const [description_modal_visible, setDescription_modal_visible] = useState(false);\n  const [featuresStatus, setFeaturesStatus] = useState();\n  const [featureScore, setFeaturesScore] = useState();\n  const [checkedViewOption, setCheckedViewOption] = useState();\n  const [scopeSelect, setScopeSelect] = useState();\n  const [addressInput, setAddressInput] = useState();\n  const [modalTitle, setModalTtile] = useState();\n  const [widgetItem, setWidgetItem] = useState();\n  const {\n    userWidget\n  } = userWidgetResult;\n  useEffect(() => {\n    if (localStorage.getItem(\"isLogin\") === JSON.stringify(false) || localStorage.getItem(\"isLogin\") === null) {\n      window.location.href = \"./login\";\n      return;\n    }\n\n    setUserId(JSON.parse(localStorage.getItem(\"user_info\")).user_id);\n  }, []);\n  useEffect(() => {\n    if (user_id === undefined) return;\n    dispatch(getUserWidgetByUserID({\n      user_id: user_id\n    }));\n  }, [dispatch, user_id]);\n\n  const handle_widget_Ok = e => {\n    setWidget_modal_visible(false);\n  };\n\n  const handle_widget_Cancel = e => {\n    setWidget_modal_visible(false);\n  };\n\n  const handle_widget_ii_Ok = e => {\n    setWidget_ii_modal_visible(false);\n  };\n\n  const handle_widget_ii_Cancel = e => {\n    setWidget_ii_modal_visible(false);\n  };\n\n  const handle_view_widget = item => {\n    setModalTtile(item.widget_name);\n    setFeaturesStatus(JSON.parse(item.selected_features));\n    setFeaturesScore(JSON.parse(item.features_score));\n    setCheckedViewOption(JSON.parse(item.checked_view));\n    setScopeSelect(item.scope);\n    setAddressInput(item.address);\n    setWidget_modal_visible(true);\n  };\n\n  const handle_view_widget_ii = item => {\n    setModalTtile(item.widget_name);\n    setFeaturesStatus(JSON.parse(item.selected_features));\n    setFeaturesScore(JSON.parse(item.features_score));\n    setCheckedViewOption(JSON.parse(item.checked_view));\n    setScopeSelect(item.scope);\n    setAddressInput(item.address);\n    setWidget_ii_modal_visible(true);\n  };\n\n  const handle_desription_Ok = e => {\n    setDescription_modal_visible(false);\n  };\n\n  const handle_desription_Cancel = e => {\n    setDescription_modal_visible(false);\n  };\n\n  const handle_view_description = item => {\n    setModalTtile(item.widget_name);\n    setWidgetItem(item);\n    setDescription_modal_visible(true);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"My Customized Widget\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.subTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, \"Active Products\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.widgetList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_List, {\n    bordered: true,\n    dataSource: userWidget,\n    renderItem: item => /*#__PURE__*/React.createElement(_List.Item, {\n      actions: [/*#__PURE__*/React.createElement(\"p\", {\n        key: \"list-loadmore-edit\",\n        style: {\n          color: \"#db6333\",\n          fontWeight: \"bold\",\n          cursor: \"pointer\"\n        },\n        onClick: () => handle_view_description(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 19\n        }\n      }, \"View Parameters\"), /*#__PURE__*/React.createElement(\"p\", {\n        key: \"list-viewWidget-more\",\n        style: {\n          color: \"#db6333\",\n          fontWeight: \"bold\",\n          cursor: \"pointer\"\n        },\n        onClick: () => handle_view_widget(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 19\n        }\n      }, \"View Widget\"), /*#__PURE__*/React.createElement(\"p\", {\n        key: \"list-viewWidget-ii-more\",\n        style: {\n          color: \"#db6333\",\n          fontWeight: \"bold\",\n          cursor: \"pointer\"\n        },\n        onClick: () => handle_view_widget_ii(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 19\n        }\n      }, \"View Widget II\")],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(_List.Item.Meta, {\n      title: /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontWeight: \"bold\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }\n      }, item.widget_name),\n      description: /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }\n      }, item.widget_description, \" \", /*#__PURE__*/React.createElement(\"div\", {\n        styles: {\n          marginTop: \"3px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }\n      }, \"Published at\", \" \", /*#__PURE__*/React.createElement(\"em\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 27\n        }\n      }, moment(item.created_at).format(\"YYYY-MM-DD HH:mm\"))))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    className: styles.createButton,\n    onClick: () => {\n      window.location.href = \"/widgets\";\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, \"Create a New Widget\"))), /*#__PURE__*/React.createElement(_Modal, {\n    title: modalTitle + \" Result\",\n    visible: widget_modal_visible,\n    width: 800,\n    onOk: handle_widget_Ok,\n    onCancel: handle_widget_Cancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(WidgetBox, {\n    features: featuresStatus,\n    featureScore: featureScore,\n    checkedView: checkedViewOption,\n    scope: scopeSelect,\n    addressInput: addressInput,\n    isMyWidget: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(_Modal, {\n    title: modalTitle + \" Result\",\n    visible: widget_ii_modal_visible,\n    width: 1400,\n    onOk: handle_widget_ii_Ok,\n    onCancel: handle_widget_ii_Cancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(_Row, {\n    gutter: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Col, {\n    span: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(WidgetBox, {\n    features: featuresStatus,\n    featureScore: featureScore,\n    checkedView: checkedViewOption,\n    scope: scopeSelect,\n    addressInput: addressInput,\n    isMyWidget: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(_Col, {\n    span: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }, \" \", /*#__PURE__*/React.createElement(WidgetBoxForUser, {\n    features: featuresStatus,\n    featureScore: featureScore,\n    checkedView: checkedViewOption,\n    scope: scopeSelect,\n    addressInput: addressInput,\n    isMyWidget: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(_Modal, {\n    title: modalTitle + \" Description\",\n    visible: description_modal_visible,\n    width: 1000,\n    onOk: handle_desription_Ok,\n    onCancel: handle_desription_Cancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(WidgetDescription, {\n    widgetInfo: widgetItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default WidgetContent;","map":{"version":3,"sources":["F:/Project/walkspanDeploy/src/pages/admin/component_of_control_panel/WidgetContent.js"],"names":["React","useEffect","useState","styles","useDispatch","useMappedState","getUserWidgetByUserID","WidgetBox","WidgetBoxForUser","moment","WidgetDescription","mapStateWidget","state","widget","WidgetContent","dispatch","user_id","setUserId","userWidgetResult","userWidget","widget_modal_visible","setWidget_modal_visible","widget_ii_modal_visible","setWidget_ii_modal_visible","description_modal_visible","setDescription_modal_visible","featuresStatus","setFeaturesStatus","featureScore","setFeaturesScore","checkedViewOption","setCheckedViewOption","scopeSelect","setScopeSelect","addressInput","setAddressInput","modalTitle","setModalTtile","widgetItem","setWidgetItem","localStorage","getItem","JSON","stringify","window","location","href","parse","undefined","handle_widget_Ok","e","handle_widget_Cancel","handle_widget_ii_Ok","handle_widget_ii_Cancel","handle_view_widget","item","widget_name","selected_features","features_score","checked_view","scope","address","handle_view_widget_ii","handle_desription_Ok","handle_desription_Cancel","handle_view_description","container","title","subTitle","widgetList","color","fontWeight","cursor","widget_description","marginTop","created_at","format","button","createButton"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./WidgetContent.module.less\";\r\nimport { List, Button, Modal, Row, Col } from \"antd\";\r\nimport { useDispatch, useMappedState } from \"redux-react-hook\";\r\nimport { getUserWidgetByUserID } from \"../../../actions/widget\";\r\nimport WidgetBox from \"../../widgets/WidgetBox/widgetBox\";\r\nimport WidgetBoxForUser from \"./WidgetBoxForUser\";\r\nimport moment from \"moment\";\r\nimport WidgetDescription from \"./WidgetDescription\";\r\n\r\nconst mapStateWidget = (state) => state.widget;\r\n\r\nconst WidgetContent = () => {\r\n  const dispatch = useDispatch();\r\n  const [user_id, setUserId] = useState();\r\n  const { userWidgetResult = { userWidget: [] } } = useMappedState(\r\n    mapStateWidget\r\n  );\r\n  const [widget_modal_visible, setWidget_modal_visible] = useState(false);\r\n  const [widget_ii_modal_visible, setWidget_ii_modal_visible] = useState(false);\r\n  const [description_modal_visible, setDescription_modal_visible] = useState(\r\n    false\r\n  );\r\n  const [featuresStatus, setFeaturesStatus] = useState();\r\n  const [featureScore, setFeaturesScore] = useState();\r\n  const [checkedViewOption, setCheckedViewOption] = useState();\r\n  const [scopeSelect, setScopeSelect] = useState();\r\n  const [addressInput, setAddressInput] = useState();\r\n  const [modalTitle, setModalTtile] = useState();\r\n  const [widgetItem, setWidgetItem] = useState();\r\n\r\n  const { userWidget } = userWidgetResult;\r\n\r\nuseEffect(()=>{\r\n  if (localStorage.getItem(\"isLogin\") === JSON.stringify(false) ||\r\n    localStorage.getItem(\"isLogin\") === null ) {\r\n      window.location.href=\"./login\"\r\n      return;\r\n    }\r\n  setUserId(JSON.parse(localStorage.getItem(\"user_info\")).user_id);\r\n}, [])\r\n\r\n  useEffect(() => {\r\n    if (user_id === undefined)\r\n      return;\r\n    dispatch(getUserWidgetByUserID({ user_id: user_id }));\r\n  }, [dispatch, user_id]);\r\n\r\n  const handle_widget_Ok = (e) => {\r\n    setWidget_modal_visible(false);\r\n  };\r\n\r\n  const handle_widget_Cancel = (e) => {\r\n    setWidget_modal_visible(false);\r\n  };\r\n\r\n  const handle_widget_ii_Ok = (e) => {\r\n    setWidget_ii_modal_visible(false);\r\n  };\r\n\r\n  const handle_widget_ii_Cancel = (e) => {\r\n    setWidget_ii_modal_visible(false);\r\n  };\r\n\r\n  const handle_view_widget = (item) => {\r\n    setModalTtile(item.widget_name);\r\n    setFeaturesStatus(JSON.parse(item.selected_features));\r\n    setFeaturesScore(JSON.parse(item.features_score));\r\n    setCheckedViewOption(JSON.parse(item.checked_view));\r\n    setScopeSelect(item.scope);\r\n    setAddressInput(item.address);\r\n\r\n    setWidget_modal_visible(true);\r\n  };\r\n\r\n  const handle_view_widget_ii = (item) => {\r\n    setModalTtile(item.widget_name);\r\n    setFeaturesStatus(JSON.parse(item.selected_features));\r\n    setFeaturesScore(JSON.parse(item.features_score));\r\n    setCheckedViewOption(JSON.parse(item.checked_view));\r\n    setScopeSelect(item.scope);\r\n    setAddressInput(item.address);\r\n\r\n    setWidget_ii_modal_visible(true);\r\n  };\r\n\r\n  const handle_desription_Ok = (e) => {\r\n    setDescription_modal_visible(false);\r\n  };\r\n\r\n  const handle_desription_Cancel = (e) => {\r\n    setDescription_modal_visible(false);\r\n  };\r\n\r\n  const handle_view_description = (item) => {\r\n    setModalTtile(item.widget_name);\r\n    setWidgetItem(item);\r\n    setDescription_modal_visible(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.container}>\r\n        <div className={styles.title}>My Customized Widget</div>\r\n\r\n        <div className={styles.subTitle}>Active Products</div>\r\n\r\n        <div className={styles.widgetList}>\r\n          <List\r\n            bordered\r\n            dataSource={userWidget}\r\n            renderItem={(item) => (\r\n              <List.Item\r\n                actions={[\r\n                  <p\r\n                    key=\"list-loadmore-edit\"\r\n                    style={{\r\n                      color: \"#db6333\",\r\n                      fontWeight: \"bold\",\r\n                      cursor: \"pointer\",\r\n                    }}\r\n                    onClick={() => handle_view_description(item)}\r\n                  >\r\n                    View Parameters\r\n                  </p>,\r\n                  <p\r\n                    key=\"list-viewWidget-more\"\r\n                    style={{\r\n                      color: \"#db6333\",\r\n                      fontWeight: \"bold\",\r\n                      cursor: \"pointer\",\r\n                    }}\r\n                    onClick={() => handle_view_widget(item)}\r\n                  >\r\n                    View Widget\r\n                  </p>,\r\n                  <p\r\n                    key=\"list-viewWidget-ii-more\"\r\n                    style={{\r\n                      color: \"#db6333\",\r\n                      fontWeight: \"bold\",\r\n                      cursor: \"pointer\",\r\n                    }}\r\n                    onClick={() => handle_view_widget_ii(item)}\r\n                  >\r\n                    View Widget II\r\n                  </p>,\r\n                ]}\r\n              >\r\n                <List.Item.Meta\r\n                  title={\r\n                    <span style={{ fontWeight: \"bold\" }}>\r\n                      {item.widget_name}\r\n                    </span>\r\n                  }\r\n                  description={\r\n                    <div>\r\n                      {item.widget_description}{\" \"}\r\n                      <div\r\n                        styles={{\r\n                          marginTop: \"3px\",\r\n                        }}\r\n                      >\r\n                        <span>\r\n                          Published at{\" \"}\r\n                          <em>\r\n                            {moment(item.created_at).format(\"YYYY-MM-DD HH:mm\")}\r\n                          </em>\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  }\r\n                />\r\n              </List.Item>\r\n            )}\r\n          />\r\n        </div>\r\n        <div className={styles.button}>\r\n          <Button\r\n            className={styles.createButton}\r\n            onClick={() => {\r\n              window.location.href = \"/widgets\";\r\n            }}\r\n          >\r\n            Create a New Widget\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <Modal\r\n        title={modalTitle + \" Result\"}\r\n        visible={widget_modal_visible}\r\n        width={800}\r\n        onOk={handle_widget_Ok}\r\n        onCancel={handle_widget_Cancel}\r\n      >\r\n        {/* <WidgetBoxForUser features={featuresStatus}\r\n          featureScore={featureScore}\r\n          checkedView={checkedViewOption}\r\n          scope={scopeSelect}\r\n          addressInput={addressInput}\r\n          isMyWidget={true}/> */}\r\n        <WidgetBox\r\n          features={featuresStatus}\r\n          featureScore={featureScore}\r\n          checkedView={checkedViewOption}\r\n          scope={scopeSelect}\r\n          addressInput={addressInput}\r\n          isMyWidget={true}\r\n        />\r\n      </Modal>\r\n\r\n      <Modal\r\n        title={modalTitle + \" Result\"}\r\n        visible={widget_ii_modal_visible}\r\n        width={1400}\r\n        onOk={handle_widget_ii_Ok}\r\n        onCancel={handle_widget_ii_Cancel}\r\n      >\r\n        <Row gutter={10}>\r\n          <Col span={12}>\r\n            <br />\r\n            <br />\r\n            <WidgetBox\r\n              features={featuresStatus}\r\n              featureScore={featureScore}\r\n              checkedView={checkedViewOption}\r\n              scope={scopeSelect}\r\n              addressInput={addressInput}\r\n              isMyWidget={true}\r\n            />\r\n          </Col>\r\n\r\n          <Col span={12}>\r\n            {\" \"}\r\n            <WidgetBoxForUser\r\n              features={featuresStatus}\r\n              featureScore={featureScore}\r\n              checkedView={checkedViewOption}\r\n              scope={scopeSelect}\r\n              addressInput={addressInput}\r\n              isMyWidget={true}\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </Modal>\r\n\r\n      <Modal\r\n        title={modalTitle + \" Description\"}\r\n        visible={description_modal_visible}\r\n        width={1000}\r\n        onOk={handle_desription_Ok}\r\n        onCancel={handle_desription_Cancel}\r\n      >\r\n        <WidgetDescription widgetInfo={widgetItem} />\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default WidgetContent;\r\n"]},"metadata":{},"sourceType":"module"}