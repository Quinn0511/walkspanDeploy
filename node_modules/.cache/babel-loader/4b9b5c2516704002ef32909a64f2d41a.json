{"ast":null,"code":"import\"antd/es/space/style\";import _Space from\"antd/es/space\";import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/checkbox/style\";import _Checkbox from\"antd/es/checkbox\";import\"antd/es/input/style\";import _Input from\"antd/es/input\";import\"antd/es/notification/style\";import _notification from\"antd/es/notification\";import\"antd/es/form/style\";import _Form from\"antd/es/form\";import _slicedToArray from\"F:\\\\Project\\\\walkspanDeploy\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import\"antd/es/layout/style\";import _Layout from\"antd/es/layout\";import React,{useEffect}from\"react\";import styles from\"./LoginPage.module.less\";import NavigationBar from\"../../component/navigationBar\";import Footer from\"../../component/footer\";import{getLogin}from\"../../actions/login\";import{useDispatch,useMappedState}from\"redux-react-hook\";var Content=_Layout.Content;var layout={labelCol:{span:8},wrapperCol:{span:8}};var tailLayout={wrapperCol:{offset:4,span:16}};var mapStateLogin=function mapStateLogin(state){return state.login;};var LoginPage=function LoginPage(){// const handleClick = () => {\n//   window.location.herf(\"/login\");\n// };\nvar handleSignup=function handleSignup(){window.location.href=\"/signup\";};var dispatch=useDispatch();var _Form$useForm=_Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useMappedState=useMappedState(mapStateLogin),LoginResult=_useMappedState.LoginResult;var handleFinish=function handleFinish(values){var params=new URLSearchParams();params.append(\"username\",values.username);params.append(\"password\",values.password);form.validateFields([\"username\",\"password\"]).then(function(){dispatch(getLogin(params));}).catch(function(errorInfo){console.log(errorInfo);});};useEffect(function(){if(LoginResult===undefined)return;if(LoginResult.status===\"Successfully\"){_notification[\"success\"]({message:\"Login Sucessfully\"});localStorage.setItem(\"isLogin\",true);localStorage.setItem(\"user_info\",JSON.stringify(LoginResult.userInfo));//console.log(LoginResult.userInfo);\nwindow.location.href=\"/admin\";}else{_notification[\"error\"]({message:\"Failed\",description:\"Password or username incorrect!\"});}},[LoginResult]);return/*#__PURE__*/React.createElement(\"div\",{className:styles.container},/*#__PURE__*/React.createElement(\"div\",{className:styles.header},/*#__PURE__*/React.createElement(NavigationBar,null)),/*#__PURE__*/React.createElement(\"div\",{className:styles.title},/*#__PURE__*/React.createElement(\"div\",{className:styles.subtitle},\" Login \"),/*#__PURE__*/React.createElement(Content,{align:\"center\"},/*#__PURE__*/React.createElement(_Form,Object.assign({},layout,{form:form,onFinish:handleFinish}),/*#__PURE__*/React.createElement(_Form.Item,{label:\"Username\",name:\"username\",rules:[{required:true,message:\"Please input your username!\"}]},/*#__PURE__*/React.createElement(_Input,null)),/*#__PURE__*/React.createElement(_Form.Item,{label:\"Password\",name:\"password\",rules:[{required:true,message:\"Please input your password!\"}]},/*#__PURE__*/React.createElement(_Input,{type:\"password\"})),/*#__PURE__*/React.createElement(_Form.Item,Object.assign({},tailLayout,{name:\"remember\",valuePropName:\"checked\"}),/*#__PURE__*/React.createElement(_Checkbox,null,\"Remember me\")),/*#__PURE__*/React.createElement(_Form.Item,tailLayout,/*#__PURE__*/React.createElement(_Space,{direction:\"horizontal\"},/*#__PURE__*/React.createElement(\"div\",{className:styles.button},/*#__PURE__*/React.createElement(_Button,{className:styles.createButton,onClick:handleSignup},\"Sign Up\"),/*#__PURE__*/React.createElement(_Button,{className:styles.createButton,type:\"primary\",htmlType:\"submit\"},\"Submit\"))))))),/*#__PURE__*/React.createElement(\"div\",{className:styles.footer},/*#__PURE__*/React.createElement(Footer,null)));};export default LoginPage;","map":{"version":3,"sources":["F:/Project/walkspanDeploy/src/pages/login/LoginPage.jsx"],"names":["React","useEffect","styles","NavigationBar","Footer","getLogin","useDispatch","useMappedState","Content","layout","labelCol","span","wrapperCol","tailLayout","offset","mapStateLogin","state","login","LoginPage","handleSignup","window","location","href","dispatch","useForm","form","LoginResult","handleFinish","values","params","URLSearchParams","append","username","password","validateFields","then","catch","errorInfo","console","log","undefined","status","message","localStorage","setItem","JSON","stringify","userInfo","description","container","header","title","subtitle","required","button","createButton","footer"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Layout } from \"antd\";\r\nimport { Form, Input, Button, Checkbox, Space, notification } from \"antd\";\r\nimport styles from \"./LoginPage.module.less\";\r\nimport NavigationBar from \"../../component/navigationBar\";\r\nimport Footer from \"../../component/footer\";\r\nimport { getLogin } from \"../../actions/login\";\r\nimport { useDispatch, useMappedState } from \"redux-react-hook\";\r\n\r\nconst { Content } = Layout;\r\n\r\nconst layout = {\r\n  labelCol: { span: 8 },\r\n  wrapperCol: { span: 8 },\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: { offset: 4, span: 16 },\r\n};\r\n\r\nconst mapStateLogin = (state) => state.login;\r\nconst LoginPage = () => {\r\n  // const handleClick = () => {\r\n  //   window.location.herf(\"/login\");\r\n  // };\r\n\r\n  const handleSignup = () => {\r\n    window.location.href = \"/signup\";\r\n  };\r\n  const dispatch = useDispatch();\r\n  const [form] = Form.useForm();\r\n  const { LoginResult } = useMappedState(mapStateLogin);\r\n\r\n  const handleFinish = (values) => {\r\n    let params = new URLSearchParams();\r\n    params.append(\"username\", values.username);\r\n    params.append(\"password\", values.password);\r\n    form\r\n      .validateFields([\"username\", \"password\"])\r\n      .then(() => {\r\n        dispatch(getLogin(params));\r\n      })\r\n      .catch((errorInfo) => {\r\n        console.log(errorInfo);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (LoginResult === undefined) return;\r\n\r\n    if (LoginResult.status === \"Successfully\") {\r\n      notification[\"success\"]({\r\n        message: \"Login Sucessfully\",\r\n      });\r\n      localStorage.setItem(\"isLogin\", true);\r\n      localStorage.setItem(\"user_info\", JSON.stringify(LoginResult.userInfo));\r\n\r\n      //console.log(LoginResult.userInfo);\r\n      window.location.href = \"/admin\";\r\n    } else {\r\n      notification[\"error\"]({\r\n        message: \"Failed\",\r\n        description: \"Password or username incorrect!\",\r\n      });\r\n    }\r\n  }, [LoginResult]);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.header}>\r\n        <NavigationBar />\r\n      </div>\r\n      <div className={styles.title}>\r\n        <div className={styles.subtitle}> Login </div>\r\n        <Content align=\"center\">\r\n          <Form {...layout} form={form} onFinish={handleFinish}>\r\n            <Form.Item\r\n              label=\"Username\"\r\n              name=\"username\"\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: \"Please input your username!\",\r\n                },\r\n              ]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"Password\"\r\n              name=\"password\"\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: \"Please input your password!\",\r\n                },\r\n              ]}\r\n            >\r\n              <Input type=\"password\" />\r\n            </Form.Item>\r\n            <Form.Item {...tailLayout} name=\"remember\" valuePropName=\"checked\">\r\n              <Checkbox>Remember me</Checkbox>\r\n            </Form.Item>\r\n            <Form.Item {...tailLayout}>\r\n              <Space direction=\"horizontal\">\r\n                <div className={styles.button}>\r\n                  <Button\r\n                    className={styles.createButton}\r\n                    onClick={handleSignup}\r\n                  >\r\n                    Sign Up\r\n                  </Button>\r\n                  <Button\r\n                    className={styles.createButton}\r\n                    type=\"primary\"\r\n                    htmlType=\"submit\"\r\n                  >\r\n                    Submit\r\n                  </Button>\r\n                </div>\r\n              </Space>\r\n            </Form.Item>\r\n          </Form>\r\n        </Content>\r\n      </div>\r\n      <div className={styles.footer}>\r\n        <Footer />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"]},"metadata":{},"sourceType":"module"}