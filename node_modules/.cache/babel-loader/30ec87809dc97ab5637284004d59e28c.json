{"ast":null,"code":"import \"antd/es/space/style\";\nimport _Space from \"antd/es/space\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/checkbox/style\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/notification/style\";\nimport _notification from \"antd/es/notification\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/layout/style\";\nimport _Layout from \"antd/es/layout\";\nvar _jsxFileName = \"F:\\\\Project\\\\walkspanDeploy\\\\src\\\\pages\\\\login\\\\LoginPage.jsx\";\nimport React, { useEffect } from \"react\";\nimport styles from \"./LoginPage.module.less\";\nimport NavigationBar from \"../../component/navigationBar\";\nimport Footer from \"../../component/footer\";\nimport { getLogin } from \"../../actions/login\";\nimport { useDispatch, useMappedState } from \"redux-react-hook\";\nconst {\n  Content\n} = _Layout;\nconst layout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 8\n  }\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 4,\n    span: 16\n  }\n};\n\nconst mapStateLogin = state => state.login;\n\nconst LoginPage = () => {\n  // const handleClick = () => {\n  //   window.location.herf(\"/login\");\n  // };\n  const handleSignup = () => {\n    window.location.href = \"/signup\";\n  };\n\n  const dispatch = useDispatch();\n\n  const [form] = _Form.useForm();\n\n  const {\n    LoginResult\n  } = useMappedState(mapStateLogin);\n\n  const handleFinish = values => {\n    let params = new URLSearchParams();\n    params.append(\"username\", values.username);\n    params.append(\"password\", values.password);\n    form.validateFields([\"username\", \"password\"]).then(() => {\n      dispatch(getLogin(params));\n    }).catch(errorInfo => {\n      console.log(errorInfo);\n    });\n  };\n\n  useEffect(() => {\n    if (LoginResult === undefined) return;\n\n    if (LoginResult.status === \"Successfully\") {\n      _notification[\"success\"]({\n        message: \"Login Sucessfully\"\n      });\n\n      localStorage.setItem(\"isLogin\", true);\n      localStorage.setItem(\"user_info\", JSON.stringify(LoginResult.userInfo)); //console.log(LoginResult.userInfo);\n\n      window.location.href = \"/admin\";\n    } else {\n      _notification[\"error\"]({\n        message: \"Failed\",\n        description: \"Password or username incorrect!\"\n      });\n    }\n  }, [LoginResult]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.header,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(NavigationBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.subtitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, \" Login \"), /*#__PURE__*/React.createElement(Content, {\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(_Form, Object.assign({}, layout, {\n    form: form,\n    onFinish: handleFinish,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(_Form.Item, {\n    label: \"Username\",\n    name: \"username\",\n    rules: [{\n      required: true,\n      message: \"Please input your username!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(_Form.Item, {\n    label: \"Password\",\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: \"Please input your password!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    type: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(_Form.Item, Object.assign({}, tailLayout, {\n    name: \"remember\",\n    valuePropName: \"checked\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(_Checkbox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, \"Remember me\")), /*#__PURE__*/React.createElement(_Form.Item, Object.assign({}, tailLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(_Space, {\n    direction: \"horizontal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    className: styles.createButton,\n    onClick: handleSignup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  }, \"Sign Up\"), /*#__PURE__*/React.createElement(_Button, {\n    className: styles.createButton,\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }\n  }, \"Submit\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.footer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default LoginPage;","map":{"version":3,"sources":["F:/Project/walkspanDeploy/src/pages/login/LoginPage.jsx"],"names":["React","useEffect","styles","NavigationBar","Footer","getLogin","useDispatch","useMappedState","Content","layout","labelCol","span","wrapperCol","tailLayout","offset","mapStateLogin","state","login","LoginPage","handleSignup","window","location","href","dispatch","form","useForm","LoginResult","handleFinish","values","params","URLSearchParams","append","username","password","validateFields","then","catch","errorInfo","console","log","undefined","status","message","localStorage","setItem","JSON","stringify","userInfo","description","container","header","title","subtitle","required","button","createButton","footer"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Layout } from \"antd\";\r\nimport { Form, Input, Button, Checkbox, Space, notification } from \"antd\";\r\nimport styles from \"./LoginPage.module.less\";\r\nimport NavigationBar from \"../../component/navigationBar\";\r\nimport Footer from \"../../component/footer\";\r\nimport { getLogin } from \"../../actions/login\";\r\nimport { useDispatch, useMappedState } from \"redux-react-hook\";\r\n\r\nconst { Content } = Layout;\r\n\r\nconst layout = {\r\n  labelCol: { span: 8 },\r\n  wrapperCol: { span: 8 },\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: { offset: 4, span: 16 },\r\n};\r\n\r\nconst mapStateLogin = (state) => state.login;\r\nconst LoginPage = () => {\r\n  // const handleClick = () => {\r\n  //   window.location.herf(\"/login\");\r\n  // };\r\n\r\n  const handleSignup = () => {\r\n    window.location.href = \"/signup\";\r\n  };\r\n  const dispatch = useDispatch();\r\n  const [form] = Form.useForm();\r\n  const { LoginResult } = useMappedState(mapStateLogin);\r\n\r\n  const handleFinish = (values) => {\r\n    let params = new URLSearchParams();\r\n    params.append(\"username\", values.username);\r\n    params.append(\"password\", values.password);\r\n    form\r\n      .validateFields([\"username\", \"password\"])\r\n      .then(() => {\r\n        dispatch(getLogin(params));\r\n      })\r\n      .catch((errorInfo) => {\r\n        console.log(errorInfo);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (LoginResult === undefined) return;\r\n\r\n    if (LoginResult.status === \"Successfully\") {\r\n      notification[\"success\"]({\r\n        message: \"Login Sucessfully\",\r\n      });\r\n      localStorage.setItem(\"isLogin\", true);\r\n      localStorage.setItem(\"user_info\", JSON.stringify(LoginResult.userInfo));\r\n\r\n      //console.log(LoginResult.userInfo);\r\n      window.location.href = \"/admin\";\r\n    } else {\r\n      notification[\"error\"]({\r\n        message: \"Failed\",\r\n        description: \"Password or username incorrect!\",\r\n      });\r\n    }\r\n  }, [LoginResult]);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.header}>\r\n        <NavigationBar />\r\n      </div>\r\n      <div className={styles.title}>\r\n        <div className={styles.subtitle}> Login </div>\r\n        <Content align=\"center\">\r\n          <Form {...layout} form={form} onFinish={handleFinish}>\r\n            <Form.Item\r\n              label=\"Username\"\r\n              name=\"username\"\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: \"Please input your username!\",\r\n                },\r\n              ]}\r\n            >\r\n              <Input />\r\n            </Form.Item>\r\n            <Form.Item\r\n              label=\"Password\"\r\n              name=\"password\"\r\n              rules={[\r\n                {\r\n                  required: true,\r\n                  message: \"Please input your password!\",\r\n                },\r\n              ]}\r\n            >\r\n              <Input type=\"password\" />\r\n            </Form.Item>\r\n            <Form.Item {...tailLayout} name=\"remember\" valuePropName=\"checked\">\r\n              <Checkbox>Remember me</Checkbox>\r\n            </Form.Item>\r\n            <Form.Item {...tailLayout}>\r\n              <Space direction=\"horizontal\">\r\n                <div className={styles.button}>\r\n                  <Button\r\n                    className={styles.createButton}\r\n                    onClick={handleSignup}\r\n                  >\r\n                    Sign Up\r\n                  </Button>\r\n                  <Button\r\n                    className={styles.createButton}\r\n                    type=\"primary\"\r\n                    htmlType=\"submit\"\r\n                  >\r\n                    Submit\r\n                  </Button>\r\n                </div>\r\n              </Space>\r\n            </Form.Item>\r\n          </Form>\r\n        </Content>\r\n      </div>\r\n      <div className={styles.footer}>\r\n        <Footer />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"]},"metadata":{},"sourceType":"module"}