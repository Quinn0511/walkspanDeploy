{"ast":null,"code":"import React from\"react\";import{GoogleMap,useLoadScript}from\"@react-google-maps/api\";import mapStyles from\"./mapStyles\";var google=window.google;var libraries=[\"places\"];var options={styles:mapStyles,disableDefaultUI:true,zoomControl:false,mapTypeControl:true,mapTypeControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT},mapTypeId:google.maps.MapTypeId.ROADMAP,rotateControl:false,scaleControl:false,streetViewControl:false,scrollwheel:false,gestureHandling:\"none\"};var CustomizeMap=function CustomizeMap(params){var _params$center=params.center,center=_params$center===void 0?{lat:40.76778789999999,lng:-73.99174099999999}:_params$center,_params$zoom=params.zoom,zoom=_params$zoom===void 0?16:_params$zoom,_params$featureName=params.featureName,featureName=_params$featureName===void 0?\"\":_params$featureName;var _useLoadScript=useLoadScript({googleMapsApiKey:\"AIzaSyBOXYeVd2IW4rON6FTyLBesJOG87NE3BJo\",libraries:libraries}),isLoaded=_useLoadScript.isLoaded,loadError=_useLoadScript.loadError;var mapRef=React.useRef();var onMapLoad=React.useCallback(function(map){map.overlayMapTypes.clear();var walkspan_layer=new google.maps.ImageMapType({getTileUrl:function getTileUrl(coord,zoom){var proj=map.getProjection();var zfactor=Math.pow(2,zoom);// Get Long Lat coordinates\nvar top=proj.fromPointToLatLng(new google.maps.Point(coord.x*256/zfactor,coord.y*256/zfactor));var bot=proj.fromPointToLatLng(new google.maps.Point((coord.x+1)*256/zfactor,(coord.y+1)*256/zfactor));// Create the Bounding box string\nvar bbox=top.lng()+\",\"+bot.lat()+\",\"+bot.lng()+\",\"+top.lat();// Build WMS URL\nvar url=\"http://18.217.77.37:8080/geoserver/walkspan/wms?\";url+=\"&REQUEST=GetMap\";url+=\"&SERVICE=WMS\";url+=\"&VERSION=1.1.1\";url+=\"&LAYERS=walkspan:walkspan\";url+=\"&FORMAT=image/png\";url+=\"&BGCOLOR=0xFFFFFF\";url+=\"&TRANSPARENT=TRUE\";url+=\"&SRS=EPSG:4326\";url+=\"&BBOX=\"+bbox;url+=\"&WIDTH=256\";url+=\"&HEIGHT=256\";url+=\"&STYLES=\"+featureName+\"Walkspan\";url+=\"&CQL_FILTER=objtype='NO'\";return url;},tileSize:new google.maps.Size(256,256),isPng:true,name:\"WalkspanLayer\"});map.overlayMapTypes.push(walkspan_layer);mapRef.current=map;},[featureName]);if(loadError)return\"Error loading maps\";if(!isLoaded)return\"Loading maps\";return params&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(GoogleMap,{zoom:zoom,mapContainerStyle:{width:\"100%\",height:\"600px\"},center:center,options:options,onLoad:onMapLoad}));};export default CustomizeMap;","map":{"version":3,"sources":["F:/Project/walkspanDeploy/src/pages/widgets/WidgetBox/Map/customizeMap.js"],"names":["React","GoogleMap","useLoadScript","mapStyles","google","window","libraries","options","styles","disableDefaultUI","zoomControl","mapTypeControl","mapTypeControlOptions","position","maps","ControlPosition","TOP_RIGHT","mapTypeId","MapTypeId","ROADMAP","rotateControl","scaleControl","streetViewControl","scrollwheel","gestureHandling","CustomizeMap","params","center","lat","lng","zoom","featureName","googleMapsApiKey","isLoaded","loadError","mapRef","useRef","onMapLoad","useCallback","map","overlayMapTypes","clear","walkspan_layer","ImageMapType","getTileUrl","coord","proj","getProjection","zfactor","Math","pow","top","fromPointToLatLng","Point","x","y","bot","bbox","url","tileSize","Size","isPng","name","push","current","width","height"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { GoogleMap, useLoadScript } from \"@react-google-maps/api\";\r\nimport mapStyles from \"./mapStyles\";\r\n\r\nconst google = window.google;\r\nconst libraries = [\"places\"];\r\n\r\nconst options = {\r\n  styles: mapStyles,\r\n  disableDefaultUI: true,\r\n  zoomControl: false,\r\n  mapTypeControl: true,\r\n  mapTypeControlOptions: {\r\n    position: google.maps.ControlPosition.TOP_RIGHT,\r\n  },\r\n  mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n  rotateControl: false,\r\n  scaleControl: false,\r\n  streetViewControl: false,\r\n  scrollwheel: false,\r\n  gestureHandling: \"none\",\r\n};\r\n\r\nconst CustomizeMap = (params) => {\r\n  const {\r\n    center = {\r\n      lat: 40.76778789999999,\r\n      lng: -73.99174099999999,\r\n    },\r\n    zoom = 16,\r\n    featureName = \"\",\r\n  } = params;\r\n  const { isLoaded, loadError } = useLoadScript({\r\n    googleMapsApiKey: \"AIzaSyBOXYeVd2IW4rON6FTyLBesJOG87NE3BJo\",\r\n    libraries,\r\n  });\r\n\r\n  const mapRef = React.useRef();\r\n  const onMapLoad = React.useCallback(\r\n    (map) => {\r\n      map.overlayMapTypes.clear();\r\n      const walkspan_layer = new google.maps.ImageMapType({\r\n        getTileUrl: function (coord, zoom) {\r\n          var proj = map.getProjection();\r\n          var zfactor = Math.pow(2, zoom);\r\n\r\n          // Get Long Lat coordinates\r\n          var top = proj.fromPointToLatLng(\r\n            new google.maps.Point(\r\n              (coord.x * 256) / zfactor,\r\n              (coord.y * 256) / zfactor\r\n            )\r\n          );\r\n          var bot = proj.fromPointToLatLng(\r\n            new google.maps.Point(\r\n              ((coord.x + 1) * 256) / zfactor,\r\n              ((coord.y + 1) * 256) / zfactor\r\n            )\r\n          );\r\n\r\n          // Create the Bounding box string\r\n          var bbox =\r\n            top.lng() + \",\" + bot.lat() + \",\" + bot.lng() + \",\" + top.lat();\r\n\r\n          // Build WMS URL\r\n          var url = \"http://18.217.77.37:8080/geoserver/walkspan/wms?\";\r\n          url += \"&REQUEST=GetMap\";\r\n          url += \"&SERVICE=WMS\";\r\n          url += \"&VERSION=1.1.1\";\r\n          url += \"&LAYERS=walkspan:walkspan\";\r\n          url += \"&FORMAT=image/png\";\r\n          url += \"&BGCOLOR=0xFFFFFF\";\r\n          url += \"&TRANSPARENT=TRUE\";\r\n          url += \"&SRS=EPSG:4326\";\r\n          url += \"&BBOX=\" + bbox;\r\n          url += \"&WIDTH=256\";\r\n          url += \"&HEIGHT=256\";\r\n          url += \"&STYLES=\" + featureName + \"Walkspan\";\r\n          url += \"&CQL_FILTER=objtype='NO'\";\r\n\r\n          return url;\r\n        },\r\n        tileSize: new google.maps.Size(256, 256),\r\n        isPng: true,\r\n        name: \"WalkspanLayer\",\r\n      });\r\n      map.overlayMapTypes.push(walkspan_layer);\r\n      mapRef.current = map;\r\n    },\r\n    [featureName]\r\n  );\r\n\r\n  if (loadError) return \"Error loading maps\";\r\n  if (!isLoaded) return \"Loading maps\";\r\n  return (\r\n    params && (\r\n      <div>\r\n        <GoogleMap\r\n          zoom={zoom}\r\n          mapContainerStyle={{\r\n            width: \"100%\",\r\n            height: \"600px\",\r\n          }}\r\n          center={center}\r\n          options={options}\r\n          onLoad={onMapLoad}\r\n        ></GoogleMap>\r\n      </div>\r\n    )\r\n  );\r\n};\r\n\r\nexport default CustomizeMap;\r\n"]},"metadata":{},"sourceType":"module"}